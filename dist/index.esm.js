"use client";import e,{useMemo as n,useRef as t,useState as i,useEffect as s,useCallback as a}from"react";const r=r=>{const o=n((()=>Object.assign(Object.assign({},r),{pin:!1,upTolerance:5,downTolerance:0,pinStart:0})),[r]),c=t(0),l=t(0),d=t(!1),u=t(!1),g=t(null),[p,h]=i({state:"unfixed",translateY:0,animation:!1}),m=()=>{h((e=>Object.assign(Object.assign({},e),{height:g.current?g.current.offsetHeight:0}))),u.current=!1};s((()=>{m()}),[]);const f=a((()=>window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight),[]),b=a((()=>{const e=document.body,n=document.documentElement;return Math.max(e.scrollHeight,n.scrollHeight,e.offsetHeight,n.offsetHeight,e.clientHeight,n.clientHeight)}),[]),O=a((e=>{const n=e<0,t=f(),i=b();return n||e+t>i}),[b,f]),w=a((()=>{var e;null===(e=o.onUnpin)||void 0===e||e.call(o),h((e=>Object.assign(Object.assign({},e),{translateY:"-100%",animation:!0,state:"unpinned"})))}),[o]),x=a((()=>{var e;null===(e=o.onUnfix)||void 0===e||e.call(o),h((e=>Object.assign(Object.assign({},e),{translateY:0,animation:!1}))),setTimeout((()=>{h((e=>Object.assign(Object.assign({},e),{state:"unfixed"})))}),0)}),[o]),j=a((()=>{if(c.current=void 0!==window.scrollY?window.scrollY:(document.documentElement||document.body.parentNode||document.body).scrollTop,!O(c.current)){const{action:e}=((e=0,n=0,t,i)=>{const s=n>=e?"down":"up",a=Math.abs(n-e);return t.pin?{action:"pinned"!==i.state?"pin":"none",scrollDirection:s,distanceScrolled:a}:n<=t.pinStart&&"unfixed"!==i.state?{action:"unfix",scrollDirection:s,distanceScrolled:a}:"number"==typeof i.height&&n<=i.height&&"down"===s&&"unfixed"===i.state?{action:"none",scrollDirection:s,distanceScrolled:a}:"number"==typeof i.height&&n>i.height+t.pinStart&&"down"===s&&"unfixed"===i.state?{action:"unpin-snap",scrollDirection:s,distanceScrolled:a}:"down"===s&&["pinned","unfixed"].indexOf(i.state)>=0&&"number"==typeof i.height&&n>i.height+t.pinStart&&a>t.downTolerance?{action:"unpin",scrollDirection:s,distanceScrolled:a}:"up"===s&&a>t.upTolerance&&["pinned","unfixed"].indexOf(i.state)<0||"up"===s&&"number"==typeof i.height&&n<=i.height&&["pinned","unfixed"].indexOf(i.state)<0?{action:"pin",scrollDirection:s,distanceScrolled:a}:{action:"none",scrollDirection:s,distanceScrolled:a}})(l.current,c.current,o,p);"pin"===e?h((e=>Object.assign(Object.assign({},e),{translateY:0,animation:!0,state:"pinned"}))):"unpin"===e?w():"unpin-snap"===e?h((e=>Object.assign(Object.assign({},e),{translateY:"-100%",animation:!1,state:"unpinned"}))):"unfix"===e&&x()}l.current=c.current,d.current=!1}),[O,o,p,x,w]),v=a((()=>{d.current||(d.current=!0,j())}),[j]),y=a((()=>{u.current||(u.current=!0,m())}),[]);s((()=>(window.addEventListener("scroll",v),window.addEventListener("resize",y),()=>{window.removeEventListener("scroll",v),window.removeEventListener("resize",y)})),[v,y]);let S={position:"unfixed"===p.state?"relative":"fixed",top:0,left:0,right:0,zIndex:1,WebkitTransform:`translate3D(0, ${p.translateY}, 0)`,MsTransform:`translate3D(0, ${p.translateY}, 0)`,transform:`translate3D(0, ${p.translateY}, 0)`};return p.animation&&(S=Object.assign(Object.assign({},S),{WebkitTransition:"all .2s ease-in-out",MozTransition:"all .2s ease-in-out",OTransition:"all .2s ease-in-out",transition:"all .2s ease-in-out"})),e.createElement("div",{style:Object.assign(Object.assign({},o.style),{height:p.height})},e.createElement("div",{ref:g,style:S},o.children))};export{r as Headroom};
//# sourceMappingURL=index.esm.js.map
