"use client";import n,{useMemo as e,useRef as t,useState as i,useEffect as a,useCallback as s}from"react";const o=o=>{const r=e((()=>Object.assign(Object.assign({},o),{pin:!1,upTolerance:5,downTolerance:0,pinStart:0})),[o]),c=t(0),l=t(0),d=t(!1),u=t(!1),g=t(null),[p,h]=i({state:"unfixed",translateY:0,animation:!1}),m=()=>{h((n=>Object.assign(Object.assign({},n),{height:g.current?g.current.offsetHeight:0}))),u.current=!1};a((()=>{m()}),[]);const f=s((()=>window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight),[]),b=s((()=>{const n=document.body,e=document.documentElement;return Math.max(n.scrollHeight,e.scrollHeight,n.offsetHeight,e.offsetHeight,n.clientHeight,e.clientHeight)}),[]),O=s((n=>{const e=n<0,t=f(),i=b();return e||n+t>i}),[b,f]),w=s((()=>{var n;null===(n=r.onUnpin)||void 0===n||n.call(r),h((n=>Object.assign(Object.assign({},n),{translateY:"-100%",animation:!0,state:"unpinned"})))}),[r]),x=s((()=>{var n;null===(n=r.onUnfix)||void 0===n||n.call(r),h((n=>Object.assign(Object.assign({},n),{translateY:0,animation:!1}))),setTimeout((()=>{h((n=>Object.assign(Object.assign({},n),{state:"unfixed"})))}),0)}),[r]),j=s((()=>{if(c.current=void 0!==window.scrollY?window.scrollY:(document.documentElement||document.body.parentNode||document.body).scrollTop,!O(c.current)){const{action:e}=((n=0,e=0,t,i)=>{const a=e>=n?"down":"up",s=Math.abs(e-n);return t.pin?{action:"pinned"!==i.state?"pin":"none",scrollDirection:a,distanceScrolled:s}:e<=t.pinStart&&"unfixed"!==i.state?{action:"unfix",scrollDirection:a,distanceScrolled:s}:"number"==typeof i.height&&e<=i.height&&"down"===a&&"unfixed"===i.state?{action:"none",scrollDirection:a,distanceScrolled:s}:"number"==typeof i.height&&e>i.height+t.pinStart&&"down"===a&&"unfixed"===i.state?{action:"unpin-snap",scrollDirection:a,distanceScrolled:s}:"down"===a&&["pinned","unfixed"].indexOf(i.state)>=0&&"number"==typeof i.height&&e>i.height+t.pinStart&&s>t.downTolerance?{action:"unpin",scrollDirection:a,distanceScrolled:s}:"up"===a&&s>t.upTolerance&&["pinned","unfixed"].indexOf(i.state)<0||"up"===a&&"number"==typeof i.height&&e<=i.height&&["pinned","unfixed"].indexOf(i.state)<0?{action:"pin",scrollDirection:a,distanceScrolled:s}:{action:"none",scrollDirection:a,distanceScrolled:s}})(l.current,c.current,r,p);"pin"===e?(null===(n=r.onPin)||void 0===n||n.call(r),h((n=>Object.assign(Object.assign({},n),{translateY:0,animation:!0,state:"pinned"})))):"unpin"===e?w():"unpin-snap"===e?h((n=>Object.assign(Object.assign({},n),{translateY:"-100%",animation:!1,state:"unpinned"}))):"unfix"===e&&x()}var n;l.current=c.current,d.current=!1}),[O,r,p,x,w]),v=s((()=>{d.current||(d.current=!0,j())}),[j]),y=s((()=>{u.current||(u.current=!0,m())}),[]);a((()=>(window.addEventListener("scroll",v),window.addEventListener("resize",y),()=>{window.removeEventListener("scroll",v),window.removeEventListener("resize",y)})),[v,y]);let S={position:"unfixed"===p.state?"relative":"fixed",top:0,left:0,right:0,zIndex:1,WebkitTransform:`translate3D(0, ${p.translateY}, 0)`,MsTransform:`translate3D(0, ${p.translateY}, 0)`,transform:`translate3D(0, ${p.translateY}, 0)`};return p.animation&&(S=Object.assign(Object.assign({},S),{WebkitTransition:"all .2s ease-in-out",MozTransition:"all .2s ease-in-out",OTransition:"all .2s ease-in-out",transition:"all .2s ease-in-out"})),n.createElement("div",{style:Object.assign(Object.assign({},r.style),{height:p.height})},n.createElement("div",{ref:g,style:S},r.children))};export{o as Headroom};
//# sourceMappingURL=index.esm.js.map
